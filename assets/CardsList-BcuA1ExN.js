import{R as l,u as D,j as i,L as q,r as R,k as S}from"./index-BGhgqjt5.js";import{u as M,Q as F,D as x,f as E,a as W,b as I}from"./DLElement--CtqVv9M.js";function V(r,e){return M(r,F)}function $(r){var e,a,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(a=$(r[e]))&&(t&&(t+=" "),t+=a)}else for(a in r)r[a]&&(t&&(t+=" "),t+=a);return t}function j(){for(var r,e,a=0,t="",s=arguments.length;a<s;a++)(r=arguments[a])&&(e=$(r))&&(t&&(t+=" "),t+=e);return t}function k(r,e){if(r==null)return{};var a={},t=Object.keys(r),s,u;for(u=0;u<t.length;u++)s=t[u],!(e.indexOf(s)>=0)&&(a[s]=r[s]);return a}var G=function(e){var a=e.currentPage,t=e.setCurrentPage,s=e.truncableText,u=s===void 0?"...":s,c=e.truncableClassName,v=c===void 0?"":c,P=e.totalPages,d=e.edgePageCount,o=e.middlePagesSiblingCount,n=Array(P).fill(0).map(function(h,K){return K+1}),p=a>1,g=a<P,f=a<=o,N=a+o>=P,m=l.useMemo(function(){var h=o*2+1;return f?n.slice(0,h):N?n.slice(-h):n.slice(a-o,a+o+1)},[a,n]),L=function(){return n.slice(0,m[0]-1)},C=l.useMemo(function(){return f||L().length<1?[]:n.slice(0,d).filter(function(h){return!m.includes(h)})},[a,n]),O=l.useMemo(function(){return n.slice(m[m.length-1],n[n.length])},[n,m]),T=l.useMemo(function(){return N?[]:O.length<1?[]:n.slice(n.length-d,n.length).filter(function(h){return!m.includes(h)})},[m,n]),Q=l.useMemo(function(){return m[0]>C[C.length-1]+1},[C,m]),A=l.useMemo(function(){return m[m.length-1]+1<T[0]},[T,m]);return{currentPage:a,setCurrentPage:t,truncableText:u,truncableClassName:v,pages:n,hasPreviousPage:p,hasNextPage:g,previousPages:C,isPreviousTruncable:Q,middlePages:m,isNextTruncable:A,nextPages:T}},Y=function(e){var a,t=e.className,s=e.children,u=e.dataTestId,c=e.as,v=c===void 0?l.createElement("button",null):c,P=k(e,["className","children","dataTestId","as"]),d=l.useContext(y),o=function(){d.currentPage+1>1&&d.setCurrentPage(d.currentPage-1)},n=d.currentPage===0;return l.createElement(v.type,Object.assign({},P,v.props,{className:j(t,v.props.className),onClick:function(){return o()},tabIndex:n?"-1":0,disabled:n,"data-testid":u,onKeyPress:function(g){g.preventDefault(),g.key==="Enter"&&!n&&o()}}),(a=v.props.children)!=null?a:s)},z=function(e){var a,t=e.className,s=e.children,u=e.dataTestId,c=e.as,v=c===void 0?l.createElement("button",null):c,P=k(e,["className","children","dataTestId","as"]),d=l.useContext(y),o=function(){d.currentPage+1<d.pages.length&&d.setCurrentPage(d.currentPage+1)},n=d.currentPage===d.pages.length-1;return l.createElement(v.type,Object.assign({},P,v.props,{className:j(t,v.props.className),onClick:function(){return o()},tabIndex:n?"-1":0,disabled:n,"data-testid":u,onKeyPress:function(g){g.preventDefault(),g.key==="Enter"&&!n&&o()}}),(a=v.props.children)!=null?a:s)},w=function(e){var a=e.prev,t=l.useContext(y),s=t.isPreviousTruncable,u=t.isNextTruncable,c=t.truncableText,v=t.truncableClassName;return s&&a===!0||u&&!a?l.createElement("li",{className:v||void 0},c):null},H=function(e){var a=e.as,t=a===void 0?l.createElement("a",null):a,s=e.className,u=e.dataTestIdActive,c=e.dataTestIdInactive,v=e.activeClassName,P=e.inactiveClassName,d=e.renderExtraProps,o=l.useContext(y),n=function(g){var f;return l.createElement("li",{key:g},l.createElement(t.type,Object.assign({"data-testid":j((f={},f[""+u]=u&&o.currentPage+1===g,f[c+"-"+g]=u&&o.currentPage+1!==g,f))||void 0,tabIndex:0,onKeyPress:function(m){m.key==="Enter"&&o.setCurrentPage(g-1)},onClick:function(){return o.setCurrentPage(g-1)},className:j(s,o.currentPage+1===g?v:P)},t.props,d?d(g):{}),g))};return l.createElement(l.Fragment,null,o.previousPages.map(n),l.createElement(w,{prev:!0}),o.middlePages.map(n),l.createElement(w,null),o.nextPages.map(n))},J={currentPage:0,setCurrentPage:function(){},truncableText:"...",truncableClassName:"",pages:[],hasPreviousPage:!1,hasNextPage:!1,previousPages:[],isPreviousTruncable:!1,middlePages:[],isNextTruncable:!1,nextPages:[]},y=l.createContext(J),b=function(e){var a=e.dataTestId,t=k(e,["dataTestId"]),s=G(t);return l.createElement(y.Provider,{value:s},l.createElement("div",{className:t.className,"data-testid":a},t.children))};b.PrevButton=Y;b.NextButton=z;b.PageButton=H;function U(r,e){return function(){const a=D(),{data:t}=V({queryKey:[r],queryFn:()=>Promise.resolve(e),refetchInterval:!1,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchIntervalInBackground:!1,staleTime:1/0});function s(c){a.setQueryData([r],c)}function u(){a.invalidateQueries({queryKey:[r]}),a.refetchQueries({queryKey:[r]})}return{data:t,setData:s,resetData:u}}}const X=U("page",1),Z=r=>{const{vin:e,vehicle_name:a,currency:t,airbags:s,year:u,odometer_value:c,odometer_type:v,primary_damage:P,repair_cost:d,retail_value:o,secondary_damage:n,damage:p,color:g,images:f,page:N}=r;return i.jsxs(q,{className:"grid grid-cols-1 grid-rows-none 840:grid-cols-[180px_auto] 840:grid-rows-[auto_auto] items-start gap-x-11-16 gap-y-7-12",to:`/#/detail/${N}/${e}`,children:[i.jsx("img",{className:"bg-secondary w-full max-w-[30rem] aspect-[4/3] rounded-10 840:row-span-full order-2",src:f[0],alt:""}),i.jsx("h2",{className:"order-1 text-24 text-text-active",children:a}),i.jsxs("dl",{className:"grid grid-cols-1 840:grid-cols-2 gap-7-8 order-2",children:[i.jsx(x,{dt:"VIN",dd:e}),i.jsx(x,{dt:"Year",dd:u}),i.jsx(x,{dt:"Color",dd:g}),i.jsx(x,{dt:"Airbags",dd:s}),i.jsx(x,{dt:"Damage",dd:p}),i.jsx(x,{dt:"Primary Damage",dd:P}),i.jsx(x,{dt:"Secondary Damage",dd:n}),i.jsx(x,{dt:"Odometer",dd:`${c} ${v}`}),i.jsx(x,{dt:"Repair Cost",dd:E({value:d,currency:t})}),i.jsx(x,{dt:"Retail Value",dd:E({value:o,currency:t})})]})]},e)},B=100,ae=()=>{const{data:r=1,setData:e}=X(),a=D(),{data:t,isPlaceholderData:s}=W({queryKey:["cards",r],queryFn:()=>I(r),placeholderData:S,staleTime:1/0}),u=c=>{e(c+1)};return R.useEffect(()=>{!s&&r<B&&a.prefetchQuery({queryKey:["cards",r+1],queryFn:()=>I(r+1)})},[s,r,a]),i.jsx("div",{className:"wrapper",children:i.jsxs("div",{className:"min-h-[calc(100dvh-var(--header-height))] flex flex-col",children:[i.jsx("div",{className:"flex flex-col gap-14-24 grow",children:t==null?void 0:t.map(c=>i.jsx(Z,{...c,page:r}))}),i.jsxs(b,{middlePagesSiblingCount:1,edgePageCount:1,totalPages:B,currentPage:r-1,setCurrentPage:u,className:"pagination justify-center flex items-center gap-11-12",truncableText:"...",children:[i.jsx(b.PrevButton,{className:"appearance-none bg-transparent border-none",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:i.jsx("path",{stroke:"var(--color-white)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m15 6-6 6 6 6"})})}),i.jsx("ul",{className:"flex gap-x-7-8 gap-y-11-12 flex-wrap",role:"navigation",children:i.jsx(b.PageButton,{activeClassName:"selected",inactiveClassName:"",className:""})}),i.jsx(b.NextButton,{className:"appearance-none bg-transparent border-none",children:i.jsx("svg",{className:"h-[1lh] rotate-180",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:i.jsx("path",{stroke:"var(--color-white)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m15 6-6 6 6 6"})})})]})]})})};export{ae as default};
